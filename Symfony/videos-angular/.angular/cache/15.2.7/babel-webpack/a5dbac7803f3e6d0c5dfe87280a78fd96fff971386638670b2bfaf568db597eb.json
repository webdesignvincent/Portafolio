{"ast":null,"code":"import { User } from '../../models/user';\nimport { UserService } from '../../services/user.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/user.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction LoginComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtext(1, \" El login no se ha completado correctamente, quizas tu email o contrase\\u00F1a son incorrectos, intenta de nuevo. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_small_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 14);\n    i0.ɵɵtext(1, \" El correo no es valido \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_small_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 14);\n    i0.ɵɵtext(1, \" La contrase\\u00F1a es obligatorio \");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class LoginComponent {\n  constructor(_userService) {\n    this._userService = _userService;\n    this.page_title = \"Identificate\";\n    this.user = new User(1, '', '', '', '', 'ROLE_USER', '');\n    this.status = 'Error';\n    this.token = '';\n    this.identity = '';\n  }\n  ngOnInit() {\n    console.log('LoginComponent Cargado!');\n  }\n  onSubmit(form) {\n    this._userService.signup(this.user).subscribe(response => {\n      // TOKEN\n      if (response.status != 'error') {\n        this.status = 'success';\n        this.token = response;\n        // OBJETO USUARIO IDENTIFICADO\n        this._userService.signup(this.user, 'true').subscribe(response => {\n          this.identity = response;\n          // PERSISTIR TOKEN DEL USUARIO\n          localStorage.setItem('token', this.token);\n          // PERSISTIR DATOS DEL USUARIO\n          localStorage.setItem('identity', JSON.stringify(this.identity));\n          // REDIRECCION A INICIO\n          this._router.navigate(['/inicio']);\n        }, error => {\n          this.status = 'error';\n          console.log(error);\n        });\n      } else {\n        this.status = 'error';\n      }\n    }, error => {\n      this.status = 'error';\n      console.log(error);\n    });\n  }\n}\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.UserService));\n};\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  features: [i0.ɵɵProvidersFeature([UserService])],\n  decls: 22,\n  vars: 8,\n  consts: [[1, \"col-md-12\", \"mt-3\"], [\"class\", \"alert alert-danger col-md-5 mt-3\", 4, \"ngIf\"], [1, \"col-md-5\", \"ml-0\", \"pl-0\", 3, \"ngSubmit\"], [\"loginForm\", \"ngForm\"], [1, \"form-group\"], [\"for\", \"email\"], [\"type\", \"email\", \"name\", \"email\", \"required\", \"\", \"pattern\", \"[a-z0-9._%+-]+@[a-z0-9.-]+\\\\.[a-z]{2,4}$\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"email\", \"ngModel\"], [\"class\", \"invalid-feedback d-block\", 4, \"ngIf\"], [\"for\", \"password\"], [\"type\", \"password\", \"name\", \"password\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"password\", \"ngModel\"], [\"type\", \"submit\", 1, \"btn\", \"btn-success\", 3, \"value\", \"disabled\"], [1, \"alert\", \"alert-danger\", \"col-md-5\", \"mt-3\"], [1, \"invalid-feedback\", \"d-block\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r6 = i0.ɵɵgetCurrentView();\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\");\n      i0.ɵɵtext(2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(3, \"hr\");\n      i0.ɵɵelementStart(4, \"p\");\n      i0.ɵɵtext(5, \" Identificate en la plataforma para comenzar! \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(6, LoginComponent_div_6_Template, 2, 0, \"div\", 1);\n      i0.ɵɵelementStart(7, \"form\", 2, 3);\n      i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_7_listener() {\n        i0.ɵɵrestoreView(_r6);\n        const _r1 = i0.ɵɵreference(8);\n        return i0.ɵɵresetView(ctx.onSubmit(_r1));\n      });\n      i0.ɵɵelementStart(9, \"div\", 4)(10, \"label\", 5);\n      i0.ɵɵtext(11, \"Correo Electronico\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"input\", 6, 7);\n      i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_12_listener($event) {\n        return ctx.user.email = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(14, LoginComponent_small_14_Template, 2, 0, \"small\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"div\", 4)(16, \"label\", 9);\n      i0.ɵɵtext(17, \"Contrase\\u00F1a\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"input\", 10, 11);\n      i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_18_listener($event) {\n        return ctx.user.password = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(20, LoginComponent_small_20_Template, 2, 0, \"small\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(21, \"input\", 12);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      const _r1 = i0.ɵɵreference(8);\n      const _r2 = i0.ɵɵreference(13);\n      const _r4 = i0.ɵɵreference(19);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.page_title);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.status == \"error\");\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngModel\", ctx.user.email);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", !_r2.valid && _r2.touched);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.user.password);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", _r4.touched && !_r4.valid);\n      i0.ɵɵadvance(1);\n      i0.ɵɵpropertyInterpolate(\"value\", ctx.page_title);\n      i0.ɵɵproperty(\"disabled\", !_r1.form.valid);\n    }\n  },\n  dependencies: [i2.NgIf, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.PatternValidator, i3.NgModel, i3.NgForm],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["User","UserService","i0","LoginComponent","constructor","_userService","page_title","user","status","token","identity","ngOnInit","console","log","onSubmit","form","signup","subscribe","response","localStorage","setItem","JSON","stringify","_router","navigate","error","selectors","features","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\xampp\\htdocs\\Full-Stack\\Symfony\\videos-angular\\src\\app\\components\\login\\login.component.ts","C:\\xampp\\htdocs\\Full-Stack\\Symfony\\videos-angular\\src\\app\\components\\login\\login.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { User } from '../../models/user';\nimport { UserService } from '../../services/user.service';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css'],\n  providers: [UserService]\n})\nexport class LoginComponent implements OnInit{\n\n  public page_title: string;\n  public user: User;\n  public status: string;\n  public token: any;\n  public identity: any;\n\n  constructor(\n    private _userService: UserService\n  ){\n    this.page_title = \"Identificate\";\n    this.user = new User(1, '', '', '', '', 'ROLE_USER', '');\n    this.status = 'Error';\n    this.token = '';\n    this.identity= '';\n  }\n\n  ngOnInit(): void {\n    console.log('LoginComponent Cargado!');\n  }\n\n  onSubmit(form:any){\n    this._userService.signup(this.user).subscribe(\n          response =>{\n            // TOKEN\n            if(response.status != 'error'){\n\n              this.status = 'success';\n              this.token = response;\n\n                  // OBJETO USUARIO IDENTIFICADO\n                  this._userService.signup(this.user, 'true').subscribe(\n                          response =>{\n\n                              this.identity = response;\n                              // PERSISTIR TOKEN DEL USUARIO\n                              localStorage.setItem('token', this.token);\n                              // PERSISTIR DATOS DEL USUARIO\n                              localStorage.setItem('identity', JSON.stringify(this.identity));\n                              // REDIRECCION A INICIO\n                              this._router.navigate(['/inicio']);\n\n                          },\n                          error =>{\n                              this.status = 'error';\n                              console.log(<any>error);\n                          }\n                  );\n\n            }else{\n              this.status = 'error';\n            }\n          },\n          error =>{\n              this.status = 'error';\n              console.log(<any>error);\n          }\n    );\n}\n\n}\n","<div class=\"col-md-12 mt-3\">\n    <h1>{{page_title}}</h1>\n    <hr>\n    <p>\n\t\tIdentificate en la plataforma para comenzar!\n\t</p>\n\n\t<div class=\"alert alert-danger col-md-5 mt-3\" *ngIf=\"status == 'error'\">\n\t\tEl login no se ha completado correctamente, quizas tu email o contraseña son incorrectos, intenta de nuevo.\n\t</div>\n\n\t<form class=\"col-md-5 ml-0 pl-0\" #loginForm=\"ngForm\" (ngSubmit)=\"onSubmit(loginForm)\">\n\n\t\t<div class=\"form-group\">\n\t\t\t<label for=\"email\">Correo Electronico</label>\n\t\t\t<input type=\"email\" name=\"email\" #email=\"ngModel\" [(ngModel)]=\"user.email\" class=\"form-control\" required pattern=\"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$\" />\n\n\t\t\t<small *ngIf=\"!email.valid && email.touched\" class=\"invalid-feedback d-block\">\n\t\t\t\tEl correo no es valido\n\t\t\t</small>\n\t\t</div>\n\n\t\t<div class=\"form-group\">\n\t\t\t<label for=\"password\">Contraseña</label>\n\t\t\t<input type=\"password\" name=\"password\" #password=\"ngModel\" [(ngModel)]=\"user.password\" class=\"form-control\" required />\n\t\t\t\n\t\t\t<small *ngIf=\"password.touched && !password.valid\" class=\"invalid-feedback d-block\">\n\t\t\t\tLa contraseña es obligatorio\n\t\t\t</small>\n\t\t</div>\n\n\t\t<input type=\"submit\" value=\"{{page_title}}\" class=\"btn btn-success\" [disabled]=\"!loginForm.form.valid\" />\t\n\t\t\n\t</form>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}