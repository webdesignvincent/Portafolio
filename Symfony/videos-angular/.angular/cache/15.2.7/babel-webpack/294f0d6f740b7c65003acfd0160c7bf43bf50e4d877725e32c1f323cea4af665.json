{"ast":null,"code":"import { User } from '../../models/user';\nimport { UserService } from '../../services/user.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/user.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction LoginComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtext(1, \" Te has identificado correctamente. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtext(1, \" El login no se ha completado correctamente, quizas tu email o contrase\\u00F1a son incorrectos, intenta de nuevo. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_small_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 14);\n    i0.ɵɵtext(1, \" El correo no es valido \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_small_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 14);\n    i0.ɵɵtext(1, \" La contrase\\u00F1a es obligatorio \");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class LoginComponent {\n  constructor(_userService, _route, _router) {\n    this._userService = _userService;\n    this._route = _route;\n    this._router = _router;\n    this.page_title = \"Identificate\";\n    this.user = new User(1, '', '', '', '', 'ROLE_USER', '');\n    this.status = 'Error';\n    this.token = '';\n    this.identity = '';\n  }\n  ngOnInit() {\n    console.log('LoginComponent Cargado!');\n  }\n  onSubmit(form) {\n    this._userService.signup(this.user).subscribe(response => {\n      if (!response.status || response.status != 'error') {\n        this.status = 'success';\n        this.identity = response;\n        // TOKEN\n        this._userService.signup(this.user, true).subscribe(response => {\n          if (!response.status || response.status != 'error') {\n            this.token = response;\n            // PERSISTIR TOKEN DEL USUARIO\n            localStorage.setItem('token', this.token);\n            // PERSISTIR DATOS DEL USUARIO\n            localStorage.setItem('identity', JSON.stringify(this.identity));\n            // REDIRECCION A INICIO\n            this._router.navigate(['/inicio']);\n          } else {\n            this.status = 'error';\n          }\n        }, error => {\n          this.status = 'error';\n          console.log(error);\n        });\n      } else {\n        this.status = 'error';\n      }\n    }, error => {\n      this.status = 'error';\n      console.log(error);\n    });\n  }\n}\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router));\n};\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  features: [i0.ɵɵProvidersFeature([UserService])],\n  decls: 23,\n  vars: 9,\n  consts: [[1, \"col-md-12\", \"mt-3\"], [\"class\", \"alert alert-danger col-md-5 mt-3\", 4, \"ngIf\"], [1, \"col-md-5\", \"ml-0\", \"pl-0\", 3, \"ngSubmit\"], [\"loginForm\", \"ngForm\"], [1, \"form-group\"], [\"for\", \"email\"], [\"type\", \"email\", \"name\", \"email\", \"required\", \"\", \"pattern\", \"[a-z0-9._%+-]+@[a-z0-9.-]+\\\\.[a-z]{2,4}$\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"email\", \"ngModel\"], [\"class\", \"invalid-feedback d-block\", 4, \"ngIf\"], [\"for\", \"password\"], [\"type\", \"password\", \"name\", \"password\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"password\", \"ngModel\"], [\"type\", \"submit\", 1, \"btn\", \"btn-success\", 3, \"value\", \"disabled\"], [1, \"alert\", \"alert-danger\", \"col-md-5\", \"mt-3\"], [1, \"invalid-feedback\", \"d-block\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r7 = i0.ɵɵgetCurrentView();\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\");\n      i0.ɵɵtext(2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(3, \"hr\");\n      i0.ɵɵelementStart(4, \"p\");\n      i0.ɵɵtext(5, \" Identificate en la plataforma para comenzar! \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(6, LoginComponent_div_6_Template, 2, 0, \"div\", 1);\n      i0.ɵɵtemplate(7, LoginComponent_div_7_Template, 2, 0, \"div\", 1);\n      i0.ɵɵelementStart(8, \"form\", 2, 3);\n      i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_8_listener() {\n        i0.ɵɵrestoreView(_r7);\n        const _r2 = i0.ɵɵreference(9);\n        return i0.ɵɵresetView(ctx.onSubmit(_r2));\n      });\n      i0.ɵɵelementStart(10, \"div\", 4)(11, \"label\", 5);\n      i0.ɵɵtext(12, \"Correo Electronico\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"input\", 6, 7);\n      i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_13_listener($event) {\n        return ctx.user.email = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(15, LoginComponent_small_15_Template, 2, 0, \"small\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"div\", 4)(17, \"label\", 9);\n      i0.ɵɵtext(18, \"Contrase\\u00F1a\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"input\", 10, 11);\n      i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_19_listener($event) {\n        return ctx.user.password = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(21, LoginComponent_small_21_Template, 2, 0, \"small\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(22, \"input\", 12);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      const _r2 = i0.ɵɵreference(9);\n      const _r3 = i0.ɵɵreference(14);\n      const _r5 = i0.ɵɵreference(20);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.page_title);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.status == \"success\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.status == \"error\");\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngModel\", ctx.user.email);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", !_r3.valid && _r3.touched);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.user.password);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", _r5.touched && !_r5.valid);\n      i0.ɵɵadvance(1);\n      i0.ɵɵpropertyInterpolate(\"value\", ctx.page_title);\n      i0.ɵɵproperty(\"disabled\", !_r2.form.valid);\n    }\n  },\n  dependencies: [i3.NgIf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.PatternValidator, i4.NgModel, i4.NgForm],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["User","UserService","i0","LoginComponent","constructor","_userService","_route","_router","page_title","user","status","token","identity","ngOnInit","console","log","onSubmit","form","signup","subscribe","response","localStorage","setItem","JSON","stringify","navigate","error","selectors","features","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\xampp\\htdocs\\Full-Stack\\Symfony\\videos-angular\\src\\app\\components\\login\\login.component.ts","C:\\xampp\\htdocs\\Full-Stack\\Symfony\\videos-angular\\src\\app\\components\\login\\login.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { User } from '../../models/user';\nimport { UserService } from '../../services/user.service';\nimport { Router, ActivatedRoute, Params } from '@angular/router';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css'],\n  providers: [UserService]\n})\nexport class LoginComponent implements OnInit{\n\n  public page_title: string;\n  public user: User;\n  public status: string;\n  public token: any;\n  public identity: any;\n\n  constructor(\n    private _userService: UserService,\n    private _route: ActivatedRoute,\n    private _router: Router\n  ){\n    this.page_title = \"Identificate\";\n    this.user = new User(1, '', '', '', '', 'ROLE_USER', '');\n    this.status = 'Error';\n    this.token = '';\n    this.identity= '';\n  }\n\n  ngOnInit(): void {\n    console.log('LoginComponent Cargado!');\n  }\n\n  onSubmit(form:any){\n    this._userService.signup(this.user).subscribe(\n          response =>{\n              if(!response.status || response.status != 'error'){\n\n                this.status = 'success';\n                this.identity = response;\n\n                    // TOKEN\n                    this._userService.signup(this.user, true).subscribe(\n                            response =>{\n                                if(!response.status || response.status != 'error'){\n                                    \n                                    this.token = response;\n                                    // PERSISTIR TOKEN DEL USUARIO\n                                    localStorage.setItem('token', this.token);\n                                    // PERSISTIR DATOS DEL USUARIO\n                                    localStorage.setItem('identity', JSON.stringify(this.identity));\n                                    // REDIRECCION A INICIO\n                                    this._router.navigate(['/inicio']);\n\n                                }else{\n                                    this.status = 'error';\n                                }\n\n                            },\n                            error =>{\n                                this.status = 'error';\n                                console.log(<any>error);\n                            }\n                    );\n\n              }else{\n                this.status = 'error';\n              }\n          },\n          error =>{\n                this.status = 'error';\n                console.log(<any>error);\n          }\n    );\n  }\n\n}\n","<div class=\"col-md-12 mt-3\">\n    <h1>{{page_title}}</h1>\n    <hr>\n    <p>\n\t\tIdentificate en la plataforma para comenzar!\n\t</p>\n\n    <div class=\"alert alert-danger col-md-5 mt-3\" *ngIf=\"status == 'success'\">\n\t\tTe has identificado correctamente.\n\t</div>\n\n\t<div class=\"alert alert-danger col-md-5 mt-3\" *ngIf=\"status == 'error'\">\n\t\tEl login no se ha completado correctamente, quizas tu email o contraseña son incorrectos, intenta de nuevo.\n\t</div>\n\n\t<form class=\"col-md-5 ml-0 pl-0\" #loginForm=\"ngForm\" (ngSubmit)=\"onSubmit(loginForm)\">\n\n\t\t<div class=\"form-group\">\n\t\t\t<label for=\"email\">Correo Electronico</label>\n\t\t\t<input type=\"email\" name=\"email\" #email=\"ngModel\" [(ngModel)]=\"user.email\" class=\"form-control\" required pattern=\"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$\" />\n\n\t\t\t<small *ngIf=\"!email.valid && email.touched\" class=\"invalid-feedback d-block\">\n\t\t\t\tEl correo no es valido\n\t\t\t</small>\n\t\t</div>\n\n\t\t<div class=\"form-group\">\n\t\t\t<label for=\"password\">Contraseña</label>\n\t\t\t<input type=\"password\" name=\"password\" #password=\"ngModel\" [(ngModel)]=\"user.password\" class=\"form-control\" required />\n\t\t\t\n\t\t\t<small *ngIf=\"password.touched && !password.valid\" class=\"invalid-feedback d-block\">\n\t\t\t\tLa contraseña es obligatorio\n\t\t\t</small>\n\t\t</div>\n\n\t\t<input type=\"submit\" value=\"{{page_title}}\" class=\"btn btn-success\" [disabled]=\"!loginForm.form.valid\" />\t\n\t\t\n\t</form>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}