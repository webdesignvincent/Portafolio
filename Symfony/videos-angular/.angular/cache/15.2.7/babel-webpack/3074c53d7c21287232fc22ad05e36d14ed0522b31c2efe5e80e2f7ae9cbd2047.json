{"ast":null,"code":"import { UserService } from 'src/app/services/user.service';\nimport { VideoService } from 'src/app/services/video.service';\nimport { Video } from 'src/app/models/video';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/user.service\";\nimport * as i3 from \"src/app/services/video.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction VideoEditComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17);\n    i0.ɵɵtext(1, \" Video guardado correctamente \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction VideoEditComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵtext(1, \" No se ha guardado el video \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction VideoEditComponent_small_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 19);\n    i0.ɵɵtext(1, \" El titulo no es v\\u00E1lido \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction VideoEditComponent_small_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 19);\n    i0.ɵɵtext(1, \" La descripcion no es v\\u00E1lida \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction VideoEditComponent_small_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 19);\n    i0.ɵɵtext(1, \" El email no es valido \");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class VideoEditComponent {\n  constructor(_route, _router, _userService, _videoService) {\n    this._route = _route;\n    this._router = _router;\n    this._userService = _userService;\n    this._videoService = _videoService;\n    this.page_title = 'Modificar este video';\n    this.status = '';\n    this.identity = this._userService.getIdentity();\n    this.token = this._userService.getToken();\n    this.video = new Video(1, this.identity.sub, '', '', '', '', '', '');\n  }\n  ngOnInit() {\n    console.log('VideoEditComponent Cargado!');\n    this.getVideo();\n  }\n  getVideo() {\n    this._route.params.subscribe(params => {\n      var id = +params['id'];\n      this._videoService.getVideo(this.token, id).subscribe(response => {\n        if (response.video) {\n          this.video = response.video;\n        } else {\n          this._router.navigate(['/inicio']);\n        }\n      }, error => {\n        this.status = 'error';\n        console.log(error);\n      });\n    });\n  }\n  onSubmit(form) {\n    this._videoService.update(this.token, this.video, this.video.id).subscribe(response => {\n      if (response.status == 'success') {\n        this.status = 'success';\n        this._router.navigate(['/inicio']);\n      } else {\n        this.status = 'error';\n      }\n    }, error => {\n      this.status = 'error';\n      console.log(error);\n    });\n  }\n}\nVideoEditComponent.ɵfac = function VideoEditComponent_Factory(t) {\n  return new (t || VideoEditComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.UserService), i0.ɵɵdirectiveInject(i3.VideoService));\n};\nVideoEditComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: VideoEditComponent,\n  selectors: [[\"app-video-edit\"]],\n  features: [i0.ɵɵProvidersFeature([UserService, VideoService])],\n  decls: 27,\n  vars: 10,\n  consts: [[1, \"col-md-12\", \"mt-3\"], [\"class\", \"alert alert-success col-md-5 mt-3\", 4, \"ngIf\"], [\"class\", \"alert alert-danger col-md-5 mt-3\", 4, \"ngIf\"], [1, \"col-md-5\", \"ml-0\", \"pl-0\", 3, \"ngSubmit\"], [\"videoNew\", \"ngForm\"], [1, \"form-group\"], [\"for\", \"name\"], [\"type\", \"text\", \"name\", \"title\", \"required\", \"\", \"pattern\", \"[a-zA-Z\\u00C0-\\u00FF ]+\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"surname\", \"ngModel\"], [\"class\", \"invalid-feedback d-block\", 4, \"ngIf\"], [\"for\", \"description\"], [\"type\", \"text\", \"name\", \"description\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"name\", \"ngModel\"], [\"for\", \"url\"], [\"type\", \"url\", \"name\", \"url\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"email\", \"ngModel\"], [\"type\", \"submit\", \"value\", \"Guardar\", 1, \"btn\", \"btn-success\", 3, \"disabled\"], [1, \"alert\", \"alert-success\", \"col-md-5\", \"mt-3\"], [1, \"alert\", \"alert-danger\", \"col-md-5\", \"mt-3\"], [1, \"invalid-feedback\", \"d-block\"]],\n  template: function VideoEditComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r9 = i0.ɵɵgetCurrentView();\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\");\n      i0.ɵɵtext(2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(3, \"hr\");\n      i0.ɵɵtemplate(4, VideoEditComponent_div_4_Template, 2, 0, \"div\", 1);\n      i0.ɵɵtemplate(5, VideoEditComponent_div_5_Template, 2, 0, \"div\", 2);\n      i0.ɵɵelementStart(6, \"form\", 3, 4);\n      i0.ɵɵlistener(\"ngSubmit\", function VideoEditComponent_Template_form_ngSubmit_6_listener() {\n        i0.ɵɵrestoreView(_r9);\n        const _r2 = i0.ɵɵreference(7);\n        return i0.ɵɵresetView(ctx.onSubmit(_r2));\n      });\n      i0.ɵɵelementStart(8, \"div\", 5)(9, \"label\", 6);\n      i0.ɵɵtext(10, \"Titulo\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"input\", 7, 8);\n      i0.ɵɵlistener(\"ngModelChange\", function VideoEditComponent_Template_input_ngModelChange_11_listener($event) {\n        return ctx.video.title = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(13, VideoEditComponent_small_13_Template, 2, 0, \"small\", 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"div\", 5)(15, \"label\", 10);\n      i0.ɵɵtext(16, \"Descripcion\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"textarea\", 11, 12);\n      i0.ɵɵlistener(\"ngModelChange\", function VideoEditComponent_Template_textarea_ngModelChange_17_listener($event) {\n        return ctx.video.description = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(19, VideoEditComponent_small_19_Template, 2, 0, \"small\", 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"div\", 5)(21, \"label\", 13);\n      i0.ɵɵtext(22, \"Url de video de YouTube\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(23, \"input\", 14, 15);\n      i0.ɵɵlistener(\"ngModelChange\", function VideoEditComponent_Template_input_ngModelChange_23_listener($event) {\n        return ctx.video.url = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(25, VideoEditComponent_small_25_Template, 2, 0, \"small\", 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(26, \"input\", 16);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      const _r2 = i0.ɵɵreference(7);\n      const _r7 = i0.ɵɵreference(24);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.page_title);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.status == \"success\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.status == \"error\");\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngModel\", ctx.video.title);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", !ctx.video.title && ctx.video.title);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.video.description);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", !ctx.video.description && ctx.video.description);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.video.url);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", !_r7.valid && _r7.touched);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"disabled\", _r2.invalid);\n    }\n  },\n  dependencies: [i4.NgIf, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.RequiredValidator, i5.PatternValidator, i5.NgModel, i5.NgForm],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["UserService","VideoService","Video","i0","VideoEditComponent","constructor","_route","_router","_userService","_videoService","page_title","status","identity","getIdentity","token","getToken","video","sub","ngOnInit","console","log","getVideo","params","subscribe","id","response","navigate","error","onSubmit","form","update","selectors","features","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\xampp\\htdocs\\Full-Stack\\Symfony\\videos-angular\\src\\app\\components\\video-edit\\video-edit.component.ts","C:\\xampp\\htdocs\\Full-Stack\\Symfony\\videos-angular\\src\\app\\components\\video-new\\video-new.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Router, ActivatedRoute, Params } from '@angular/router';\nimport { UserService } from 'src/app/services/user.service';\nimport { VideoService } from 'src/app/services/video.service';\nimport { Video } from 'src/app/models/video';\nimport { global } from 'src/app/services/global';\n\n@Component({\n  selector: 'app-video-edit',\n  templateUrl: '../video-new/video-new.component.html',\n  styleUrls: ['./video-edit.component.css'],\n  providers: [UserService, VideoService]\n})\nexport class VideoEditComponent implements OnInit{\n\n  public page_title: string;\n  public identity: any;\n  public token: any;\n  public video: Video;\n  public status: string;\n\n  constructor(\n    private _route: ActivatedRoute,\n    private _router: Router,\n    private _userService: UserService,\n    private _videoService: VideoService\n  ){\n    this.page_title = 'Modificar este video';\n    this.status = '';\n    this.identity = this._userService.getIdentity();\n    this.token = this._userService.getToken();\n    this.video = new Video(1, this.identity.sub, '','','','','','');\n  }\n\n  ngOnInit(): void {\n    console.log('VideoEditComponent Cargado!');\n    this.getVideo();\n  }\n\n  getVideo(){\n      this._route.params.subscribe(params=>{\n        var id = +params['id'];\n        this._videoService.getVideo(this.token, id).subscribe(\n            response =>{\n              if(response.video){\n                  this.video = response.video;\n              }else{\n                this._router.navigate(['/inicio']);\n              }\n            },\n            error =>{\n              this.status = 'error';\n              console.log(<any>error);\n            }\n        );\n      });\n  }\n\n  onSubmit(form:any){\n      this._videoService.update(this.token, this.video, this.video.id).subscribe(\n          response =>{\n            if(response.status == 'success'){\n              this.status = 'success';\n              this._router.navigate(['/inicio']);\n            }else{\n              this.status = 'error';\n            }\n          },\n          error=>{\n              this.status = 'error';\n              console.log(<any>error);\n          }\n      );\n  }\n\n}\n","<div class=\"col-md-12 mt-3\">\n    <h1>{{page_title}}</h1>\n    <hr>\n\n    <div class=\"alert alert-success col-md-5 mt-3\" *ngIf=\"status == 'success'\">\n\t\tVideo guardado correctamente\n\t</div>\n\n\t<div class=\"alert alert-danger col-md-5 mt-3\" *ngIf=\"status == 'error'\">\n\t\tNo se ha guardado el video\n\t</div>\n\n    <form class=\"col-md-5 ml-0 pl-0\" #videoNew=\"ngForm\" (ngSubmit)=\"onSubmit(videoNew)\">\n\n        <div class=\"form-group\">\n\t\t\t<label for=\"name\">Titulo</label>\n            <input type=\"text\" name=\"title\" class=\"form-control\" #surname=\"ngModel\" [(ngModel)]=\"video.title\" required pattern=\"[a-zA-ZÀ-ÿ ]+\" />\n\n\t\t\t<small *ngIf=\"!video.title && video.title\" class=\"invalid-feedback d-block\">\n\t\t\t\tEl titulo no es válido\n\t\t\t</small>\n\t\t</div>\n\n\t\t<div class=\"form-group\">\n\t\t\t<label for=\"description\">Descripcion</label>\n            <textarea type=\"text\" name=\"description\" class=\"form-control\" #name=\"ngModel\" [(ngModel)]=\"video.description\"></textarea>\n\n\t\t\t<small *ngIf=\"!video.description && video.description\" class=\"invalid-feedback d-block\">\n\t\t\t\tLa descripcion no es válida\n\t\t\t</small>\n\t\t</div>\n\n\t\t<div class=\"form-group\">\n\t\t\t<label for=\"url\">Url de video de YouTube</label>\n\t\t\t<input type=\"url\" name=\"url\" class=\"form-control\" #email=\"ngModel\" [(ngModel)]=\"video.url\" required/>\n\n\t\t\t<small *ngIf=\"!email.valid && email.touched\" class=\"invalid-feedback d-block\">\n\t\t\t\tEl email no es valido\n\t\t\t</small>\n\t\t</div>\n\n        <input type=\"submit\" value=\"Guardar\" class=\"btn btn-success\" [disabled]=\"videoNew.invalid\" />\n        \n    </form>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}